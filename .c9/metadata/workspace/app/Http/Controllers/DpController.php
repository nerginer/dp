{"changed":true,"filter":false,"title":"DpController.php","tooltip":"/app/Http/Controllers/DpController.php","value":"<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\n\nuse App\\Http\\Requests;\nuse App\\Dp;\nuse App\\tag;\n\nuse Illuminate\\Support\\Facades\\Validator;\n\n\n\n\nclass DpController extends Controller\n{\n    \n    \n//       public function __construct()\n//    {\n//        $this->middleware('auth');\n//    }\n    \n    \n     public function index()\n    {\n        $dps = Dp::Paginate(4);\n        $tag = 0;\n        \n       // return $dps;\n        \n        return view('dps.index',compact('dps'),compact('tag'));\n    }\n    \n     public function show(DP $dp)\n    {\n       \n        //$tags = $dp->tags();\n        //return $tags;\n        return view('dps.show',compact('dp'));\n    }\n\n     public function tag(tag $tag)\n    {\n       \n       $dps = $tag->dps()->Paginate(4);\n    \n       //return $dps;\n       return view('dps.index',compact('dps'),compact('tag'));\n        \n    }\n    \n    public function search(Request $request)\n    {\n       \t// Gets the query string from our form submission \n        $search = \\Request::get('search');\n       \t\n       \t$dps = Dp::where('name', 'LIKE', '%' . $search . '%')->paginate(4);\n        \n        $tag = 0;  \n        \n        return view('dps.index',compact('dps'),compact('tag'));  \n\n     }\n     \n     public function sendForm()\n    {\n       \n        //Get all the data and store it inside Store Variable\n        $data = \\Request::all();\n\n        //Validation rules\n        //{\"_token\":\"dMKekQkq5Wqn4efEiXlNuEaYqpUIkU63HGwMed2c\",\"name\":\"TestName\",\"description\":\"Testdescription\",\"baseComponent\":\"testbase\",\"pdf\":\"testbaselink\",\"val\":\"open\",\"opensourceproject\":\"opensourcelink\",\"tags\":\"teattag1,teattag2\",\"eaglefile\":\"Breadboard_power r3.sch\"}\n        $rules = array (\n            'name' => 'required',// uncomment if you want to grab this field\n        //    'description' => 'required|min:10',\n            //'email' => 'required|email',  uncomment if you want to grab this field\n         //   'eaglefile' => 'required'\n        );\n\n        //Validate data\n        $validator = Validator::make ($data, $rules);\n\n        //If everything is correct than run passes.\n        if ($validator -> passes()){\n            \n           \n\n           \\Mail::send('emails.newDp', $data, function($message) use ($data)\n            {\n                //$message->from($data['email'] , $data['first_name']); uncomment if using first name and email fields \n                $message->from('newDP@makerstorage', 'New Design Pattern Arrived');\n                //email 'To' field: cahnge this to emails that you want to be notified.                    \n                $message->to('nerginer@gmail.com', 'Nuri')->cc('nerginer@gnexlab.com')->subject('New Design Pattern');\n\n            });\n                // Redirect to page\n                 return view('message')->with('message', 'Your message has been sent. Thank You!');\n\n\n               \n        }else{\n                //return contact form with errors\n                $errors = $validator->errors()->all();\n\n                return view('message',compact('errors'));\n                \n                \n\n        }\n     }\n    \n     \n     \n\n    \n    \n    public function licence()\n    {\n        return view('licence');\n    }\n    \n     public function message()\n    {\n        return view('message');\n    }\n     \n}\n","undoManager":{"mark":99,"position":100,"stack":[[{"start":{"row":91,"column":16},"end":{"row":91,"column":17},"action":"remove","lines":[" "],"id":317,"ignore":true},{"start":{"row":94,"column":12},"end":{"row":94,"column":16},"action":"insert","lines":["    "]},{"start":{"row":95,"column":8},"end":{"row":95,"column":16},"action":"insert","lines":["        "]}],[{"start":{"row":99,"column":8},"end":{"row":99,"column":9},"action":"remove","lines":[" "],"id":318,"ignore":true},{"start":{"row":103,"column":8},"end":{"row":103,"column":9},"action":"remove","lines":[" "]}],[{"start":{"row":105,"column":4},"end":{"row":105,"column":5},"action":"remove","lines":["}"],"id":319,"ignore":true}],[{"start":{"row":98,"column":12},"end":{"row":98,"column":16},"action":"insert","lines":["    "],"id":320,"ignore":true}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":41},"action":"insert","lines":["use Illuminate\\Support\\Facades\\Validator;"],"id":321,"ignore":true}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":41},"action":"remove","lines":["use Illuminate\\Support\\Facades\\Validator;"],"id":322,"ignore":true}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":41},"action":"insert","lines":["use Illuminate\\Support\\Facades\\Validator;"],"id":323,"ignore":true}],[{"start":{"row":10,"column":41},"end":{"row":11,"column":40},"action":"insert","lines":["","use Illuminate\\Support\\Facades\\Redirect;"],"id":324,"ignore":true}],[{"start":{"row":102,"column":40},"end":{"row":102,"column":44},"action":"remove","lines":["home"],"id":325,"ignore":true},{"start":{"row":102,"column":40},"end":{"row":102,"column":41},"action":"insert","lines":["m"]}],[{"start":{"row":102,"column":41},"end":{"row":102,"column":43},"action":"insert","lines":["es"],"id":326,"ignore":true}],[{"start":{"row":96,"column":41},"end":{"row":96,"column":45},"action":"remove","lines":["home"],"id":327,"ignore":true},{"start":{"row":96,"column":41},"end":{"row":96,"column":42},"action":"insert","lines":["m"]},{"start":{"row":102,"column":43},"end":{"row":102,"column":47},"action":"insert","lines":["sage"]}],[{"start":{"row":96,"column":42},"end":{"row":96,"column":44},"action":"insert","lines":["es"],"id":328,"ignore":true}],[{"start":{"row":96,"column":44},"end":{"row":96,"column":48},"action":"insert","lines":["sage"],"id":329,"ignore":true}],[{"start":{"row":115,"column":5},"end":{"row":120,"column":5},"action":"insert","lines":["","    ","     public function licenc()","    {","        return view('licence');","    }"],"id":330,"ignore":true}],[{"start":{"row":117,"column":21},"end":{"row":117,"column":27},"action":"remove","lines":["licenc"],"id":331,"ignore":true},{"start":{"row":117,"column":21},"end":{"row":117,"column":22},"action":"insert","lines":["m"]}],[{"start":{"row":117,"column":22},"end":{"row":117,"column":24},"action":"insert","lines":["es"],"id":332,"ignore":true}],[{"start":{"row":117,"column":24},"end":{"row":117,"column":28},"action":"insert","lines":["sage"],"id":333,"ignore":true},{"start":{"row":119,"column":21},"end":{"row":119,"column":28},"action":"remove","lines":["licence"]},{"start":{"row":119,"column":21},"end":{"row":119,"column":22},"action":"insert","lines":["m"]}],[{"start":{"row":119,"column":22},"end":{"row":119,"column":24},"action":"insert","lines":["es"],"id":334,"ignore":true}],[{"start":{"row":119,"column":24},"end":{"row":119,"column":28},"action":"insert","lines":["sage"],"id":335,"ignore":true}],[{"start":{"row":114,"column":14},"end":{"row":114,"column":15},"action":"remove","lines":[" "],"id":336,"ignore":true},{"start":{"row":114,"column":19},"end":{"row":114,"column":20},"action":"insert","lines":[" "]}],[{"start":{"row":114,"column":14},"end":{"row":114,"column":15},"action":"insert","lines":[" "],"id":337,"ignore":true},{"start":{"row":114,"column":20},"end":{"row":114,"column":21},"action":"remove","lines":[" "]}],[{"start":{"row":96,"column":24},"end":{"row":96,"column":39},"action":"remove","lines":["Redirect::route"],"id":338,"ignore":true},{"start":{"row":96,"column":24},"end":{"row":96,"column":36},"action":"insert","lines":["view('licenc"]}],[{"start":{"row":96,"column":28},"end":{"row":96,"column":36},"action":"remove","lines":["('licenc"],"id":339,"ignore":true}],[{"start":{"row":102,"column":23},"end":{"row":102,"column":38},"action":"remove","lines":["Redirect::route"],"id":340,"ignore":true},{"start":{"row":102,"column":23},"end":{"row":102,"column":24},"action":"insert","lines":["v"]}],[{"start":{"row":102,"column":24},"end":{"row":102,"column":26},"action":"insert","lines":["ie"],"id":341,"ignore":true}],[{"start":{"row":102,"column":26},"end":{"row":102,"column":27},"action":"insert","lines":["w"],"id":342,"ignore":true}],[{"start":{"row":11,"column":0},"end":{"row":11,"column":40},"action":"remove","lines":["use Illuminate\\Support\\Facades\\Redirect;"],"id":343,"ignore":true}],[{"start":{"row":102,"column":114},"end":{"row":104,"column":16},"action":"insert","lines":["","                ","                "],"id":344,"ignore":true}],[{"start":{"row":102,"column":54},"end":{"row":102,"column":112},"action":"remove","lines":["'Feedback must contain more than 5 characters. Try Again.'"],"id":345,"ignore":true},{"start":{"row":102,"column":54},"end":{"row":102,"column":81},"action":"insert","lines":["$validator->errors()->all()"]}],[{"start":{"row":102,"column":81},"end":{"row":102,"column":82},"action":"insert","lines":[";"],"id":346,"ignore":true}],[{"start":{"row":102,"column":80},"end":{"row":102,"column":82},"action":"remove","lines":[");"],"id":347,"ignore":true}],[{"start":{"row":102,"column":77},"end":{"row":102,"column":81},"action":"remove","lines":["ll()"],"id":348,"ignore":true}],[{"start":{"row":102,"column":76},"end":{"row":102,"column":77},"action":"remove","lines":["a"],"id":349,"ignore":true}],[{"start":{"row":102,"column":74},"end":{"row":102,"column":76},"action":"remove","lines":["->"],"id":350,"ignore":true}],[{"start":{"row":102,"column":74},"end":{"row":102,"column":75},"action":"insert","lines":[")"],"id":351,"ignore":true}],[{"start":{"row":102,"column":23},"end":{"row":102,"column":54},"action":"remove","lines":["view('message')->with('error', "],"id":352,"ignore":true},{"start":{"row":102,"column":43},"end":{"row":102,"column":44},"action":"remove","lines":[")"]},{"start":{"row":102,"column":43},"end":{"row":102,"column":44},"action":"insert","lines":["-"]}],[{"start":{"row":102,"column":44},"end":{"row":102,"column":46},"action":"insert","lines":[">a"],"id":353,"ignore":true}],[{"start":{"row":102,"column":46},"end":{"row":102,"column":48},"action":"insert","lines":["ll"],"id":354,"ignore":true}],[{"start":{"row":102,"column":16},"end":{"row":102,"column":49},"action":"remove","lines":["return $validator->errors()->all;"],"id":355,"ignore":true},{"start":{"row":102,"column":16},"end":{"row":103,"column":0},"action":"insert","lines":["return $validator->errors()->all();",""]}],[{"start":{"row":102,"column":16},"end":{"row":102,"column":22},"action":"remove","lines":["return"],"id":356,"ignore":true},{"start":{"row":102,"column":16},"end":{"row":102,"column":17},"action":"insert","lines":["e"]}],[{"start":{"row":102,"column":17},"end":{"row":102,"column":19},"action":"insert","lines":["rr"],"id":357,"ignore":true}],[{"start":{"row":102,"column":18},"end":{"row":102,"column":19},"action":"remove","lines":["r"],"id":358,"ignore":true}],[{"start":{"row":102,"column":17},"end":{"row":102,"column":18},"action":"remove","lines":["r"],"id":359,"ignore":true}],[{"start":{"row":102,"column":16},"end":{"row":102,"column":17},"action":"remove","lines":["e"],"id":360,"ignore":true},{"start":{"row":102,"column":16},"end":{"row":102,"column":22},"action":"insert","lines":["return"]}],[{"start":{"row":102,"column":16},"end":{"row":103,"column":0},"action":"remove","lines":["return $validator->errors()->all();",""],"id":361,"ignore":true},{"start":{"row":102,"column":16},"end":{"row":102,"column":76},"action":"insert","lines":["return view('message')->with('error', $validator->errors());"]}],[{"start":{"row":102,"column":54},"end":{"row":102,"column":75},"action":"remove","lines":["$validator->errors())"],"id":362,"ignore":true},{"start":{"row":102,"column":54},"end":{"row":102,"column":113},"action":"insert","lines":["'Feedback must contain more than 5 characters. Try Again.')"]}],[{"start":{"row":101,"column":49},"end":{"row":102,"column":16},"action":"insert","lines":["","                "],"id":363,"ignore":true}],[{"start":{"row":102,"column":16},"end":{"row":102,"column":17},"action":"insert","lines":["$"],"id":364,"ignore":true}],[{"start":{"row":102,"column":17},"end":{"row":102,"column":19},"action":"insert","lines":["er"],"id":365,"ignore":true}],[{"start":{"row":102,"column":19},"end":{"row":102,"column":24},"action":"insert","lines":["ror 0"],"id":366,"ignore":true}],[{"start":{"row":102,"column":23},"end":{"row":102,"column":24},"action":"remove","lines":["0"],"id":367,"ignore":true},{"start":{"row":102,"column":23},"end":{"row":102,"column":24},"action":"insert","lines":["?"]}],[{"start":{"row":102,"column":23},"end":{"row":102,"column":24},"action":"remove","lines":["?"],"id":368,"ignore":true},{"start":{"row":102,"column":23},"end":{"row":103,"column":0},"action":"insert","lines":["= return$validator->errors()->all();",""]}],[{"start":{"row":102,"column":25},"end":{"row":102,"column":31},"action":"remove","lines":["return"],"id":369,"ignore":true}],[{"start":{"row":104,"column":54},"end":{"row":104,"column":112},"action":"remove","lines":["'Feedback must contain more than 5 characters. Try Again.'"],"id":370,"ignore":true},{"start":{"row":104,"column":54},"end":{"row":104,"column":55},"action":"insert","lines":["$"]}],[{"start":{"row":104,"column":55},"end":{"row":104,"column":57},"action":"insert","lines":["er"],"id":371,"ignore":true}],[{"start":{"row":104,"column":57},"end":{"row":104,"column":60},"action":"insert","lines":["ror"],"id":372,"ignore":true}],[{"start":{"row":104,"column":37},"end":{"row":104,"column":50},"action":"insert","lines":[",compact('e')"],"id":373,"ignore":true}],[{"start":{"row":104,"column":48},"end":{"row":104,"column":50},"action":"insert","lines":["rr"],"id":374,"ignore":true}],[{"start":{"row":104,"column":50},"end":{"row":104,"column":52},"action":"insert","lines":["or"],"id":375,"ignore":true},{"start":{"row":104,"column":55},"end":{"row":104,"column":79},"action":"remove","lines":["->with('error', $error);"]},{"start":{"row":104,"column":55},"end":{"row":104,"column":56},"action":"insert","lines":[";"]}],[{"start":{"row":102,"column":22},"end":{"row":102,"column":23},"action":"insert","lines":["s"],"id":376,"ignore":true}],[{"start":{"row":104,"column":52},"end":{"row":104,"column":53},"action":"insert","lines":["s"],"id":377,"ignore":true}],[{"start":{"row":87,"column":11},"end":{"row":87,"column":12},"action":"insert","lines":["\\"],"id":378,"ignore":true}],[{"start":{"row":85,"column":36},"end":{"row":86,"column":12},"action":"insert","lines":["","            "],"id":379,"ignore":true}],[{"start":{"row":86,"column":12},"end":{"row":89,"column":3},"action":"insert","lines":["","            Mail::send('folder.view', $data, function($message) {","    $message->to('registered-user@gmail. com', 'Jon Doe')->subject('Welcome to the Laravel 4 Auth App!');","});"],"id":380,"ignore":true}],[{"start":{"row":89,"column":0},"end":{"row":89,"column":12},"action":"insert","lines":["            "],"id":381,"ignore":true}],[{"start":{"row":88,"column":3},"end":{"row":88,"column":16},"action":"insert","lines":["             "],"id":382,"ignore":true}],[{"start":{"row":91,"column":31},"end":{"row":91,"column":39},"action":"remove","lines":["feedback"],"id":383,"ignore":true},{"start":{"row":91,"column":31},"end":{"row":91,"column":36},"action":"insert","lines":["newDp"]}],[{"start":{"row":94,"column":32},"end":{"row":94,"column":50},"action":"remove","lines":["feedback@gmail.com"],"id":384,"ignore":true},{"start":{"row":94,"column":32},"end":{"row":94,"column":50},"action":"insert","lines":["newDP@makerstorage"]}],[{"start":{"row":94,"column":54},"end":{"row":94,"column":75},"action":"remove","lines":["feedback contact form"],"id":385,"ignore":true},{"start":{"row":94,"column":54},"end":{"row":94,"column":80},"action":"insert","lines":["New Design Pattern Arrived"]}],[{"start":{"row":96,"column":30},"end":{"row":96,"column":38},"action":"remove","lines":["feedback"],"id":386,"ignore":true},{"start":{"row":96,"column":30},"end":{"row":96,"column":31},"action":"insert","lines":["n"]}],[{"start":{"row":96,"column":31},"end":{"row":96,"column":33},"action":"insert","lines":["er"],"id":387,"ignore":true}],[{"start":{"row":96,"column":33},"end":{"row":96,"column":35},"action":"insert","lines":["gi"],"id":388,"ignore":true}],[{"start":{"row":96,"column":35},"end":{"row":96,"column":38},"action":"insert","lines":["ner"],"id":389,"ignore":true},{"start":{"row":96,"column":55},"end":{"row":96,"column":56},"action":"remove","lines":["n"]}],[{"start":{"row":96,"column":52},"end":{"row":96,"column":55},"action":"remove","lines":["Joh"],"id":390,"ignore":true},{"start":{"row":96,"column":52},"end":{"row":96,"column":53},"action":"insert","lines":["N"]}],[{"start":{"row":96,"column":53},"end":{"row":96,"column":55},"action":"insert","lines":["ur"],"id":391,"ignore":true}],[{"start":{"row":96,"column":55},"end":{"row":96,"column":56},"action":"insert","lines":["i"],"id":392,"ignore":true}],[{"start":{"row":96,"column":64},"end":{"row":96,"column":72},"action":"remove","lines":["feedback"],"id":393,"ignore":true},{"start":{"row":96,"column":64},"end":{"row":96,"column":65},"action":"insert","lines":["n"]}],[{"start":{"row":96,"column":65},"end":{"row":96,"column":67},"action":"insert","lines":["er"],"id":394,"ignore":true}],[{"start":{"row":96,"column":67},"end":{"row":96,"column":72},"action":"insert","lines":["giner"],"id":395,"ignore":true},{"start":{"row":96,"column":77},"end":{"row":96,"column":78},"action":"remove","lines":["l"]}],[{"start":{"row":96,"column":75},"end":{"row":96,"column":77},"action":"remove","lines":["ai"],"id":396,"ignore":true}],[{"start":{"row":96,"column":74},"end":{"row":96,"column":75},"action":"remove","lines":["m"],"id":397,"ignore":true}],[{"start":{"row":96,"column":74},"end":{"row":96,"column":76},"action":"insert","lines":["ne"],"id":398,"ignore":true}],[{"start":{"row":96,"column":76},"end":{"row":96,"column":80},"action":"insert","lines":["xlab"],"id":399,"ignore":true}],[{"start":{"row":96,"column":97},"end":{"row":96,"column":117},"action":"remove","lines":["feedback form submit"],"id":400,"ignore":true},{"start":{"row":96,"column":97},"end":{"row":96,"column":98},"action":"insert","lines":["s"]}],[{"start":{"row":96,"column":98},"end":{"row":96,"column":100},"action":"insert","lines":["ub"],"id":401,"ignore":true}],[{"start":{"row":96,"column":100},"end":{"row":96,"column":104},"action":"insert","lines":["ject"],"id":402,"ignore":true}],[{"start":{"row":87,"column":11},"end":{"row":89,"column":15},"action":"remove","lines":[" Mail::send('folder.view', $data, function($message) {","                 $message->to('registered-user@gmail. com', 'Jon Doe')->subject('Welcome to the Laravel 4 Auth App!');","            });"],"id":403,"ignore":true}],[{"start":{"row":76,"column":8},"end":{"row":76,"column":9},"action":"insert","lines":["/"],"id":404}],[{"start":{"row":76,"column":9},"end":{"row":76,"column":10},"action":"insert","lines":["/"],"id":405}],[{"start":{"row":78,"column":9},"end":{"row":78,"column":10},"action":"insert","lines":["/"],"id":406}],[{"start":{"row":78,"column":10},"end":{"row":78,"column":11},"action":"insert","lines":["/"],"id":407}],[{"start":{"row":94,"column":97},"end":{"row":94,"column":104},"action":"remove","lines":["subject"],"id":408},{"start":{"row":94,"column":97},"end":{"row":94,"column":123},"action":"insert","lines":["New Design Pattern Arrived"]}],[{"start":{"row":94,"column":122},"end":{"row":94,"column":123},"action":"remove","lines":["d"],"id":409}],[{"start":{"row":94,"column":121},"end":{"row":94,"column":122},"action":"remove","lines":["e"],"id":410}],[{"start":{"row":94,"column":120},"end":{"row":94,"column":121},"action":"remove","lines":["v"],"id":411}],[{"start":{"row":94,"column":119},"end":{"row":94,"column":120},"action":"remove","lines":["i"],"id":412}],[{"start":{"row":94,"column":118},"end":{"row":94,"column":119},"action":"remove","lines":["r"],"id":413}],[{"start":{"row":94,"column":117},"end":{"row":94,"column":118},"action":"remove","lines":["r"],"id":414}],[{"start":{"row":94,"column":116},"end":{"row":94,"column":117},"action":"remove","lines":["A"],"id":415}],[{"start":{"row":94,"column":115},"end":{"row":94,"column":116},"action":"remove","lines":[" "],"id":416}],[{"start":{"row":101,"column":15},"end":{"row":101,"column":49},"action":"remove","lines":[" //return View::make('contact');  "],"id":417}]]},"ace":{"folds":[],"scrolltop":960,"scrollleft":0,"selection":{"start":{"row":101,"column":15},"end":{"row":101,"column":15},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":67,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1461147030145}